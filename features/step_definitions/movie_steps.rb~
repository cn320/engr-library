Given /the following movies exist:/ do |movies_table|
  movies_table.hashes.each do |movie|
	Movie.create!(movie)
  end
end

Then /I should see "(.*)" before "(.*)"/ do |e1, e2|
   page.body.should match /#{e1}.*#{e2}/m
end


When /I (un)?check the following ratings: (.*)/ do |uncheck, rating_list|
	rating_list.split(",").each do |field|
    field = field.strip
    if uncheck == "un"
   		step %q{I uncheck "ratings_#{field}"}
		step %q{the "ratings_#{field}" checkbox should not be checked}
    else
		step %q{I check "ratings_#{field}"}
		step %q{the "ratings_#{field}" checkbox should be checked}
	end
  end
end


Then /I should see (.*) the movies/ do |count|
		page.should have_css("#movielist tr", :count => count == "all" ? 10 :count )
 
end

